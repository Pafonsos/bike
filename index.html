<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>An√°lise Estat√≠stica Comparativa</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Arial', sans-serif;
            background-color: #f5f5f5;
            color: #333;
            line-height: 1.6;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background: white;
            box-shadow: 0 0 20px rgba(0,0,0,0.1);
        }
        
        h1 {
            text-align: center;
            color: #2c3e50;
            margin-bottom: 30px;
            font-size: 2.5em;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.1);
        }
        
        .tabs {
            display: flex;
            justify-content: center;
            margin-bottom: 30px;
            border-bottom: 3px solid #ecf0f1;
            flex-wrap: wrap;
        }
        
        .tab-button {
            background: none;
            border: none;
            padding: 15px 25px;
            cursor: pointer;
            font-size: 16px;
            font-weight: bold;
            color: #7f8c8d;
            transition: all 0.3s ease;
            border-bottom: 3px solid transparent;
        }
        
        .tab-button:hover {
            color: #3498db;
            background-color: #ecf0f1;
        }
        
        .tab-button.active {
            color: #3498db;
            border-bottom-color: #3498db;
            background-color: #ecf0f1;
        }
        
        .tab-content {
            display: none;
            animation: fadeIn 0.5s ease-in;
        }
        
        .tab-content.active {
            display: block;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .stats-table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            box-shadow: 0 2px 15px rgba(0,0,0,0.1);
        }
        
        .stats-table th,
        .stats-table td {
            padding: 12px 15px;
            text-align: left;
            border-bottom: 1px solid #ddd;
        }
        
        .stats-table th {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            font-weight: bold;
            text-align: center;
        }
        
        .stats-table tr:nth-child(even) {
            background-color: #f8f9fa;
        }
        
        .stats-table tr:hover {
            background-color: #e3f2fd;
            transform: scale(1.01);
            transition: all 0.2s ease;
        }
        
        .stats-table td:first-child {
            font-weight: bold;
            color: #2c3e50;
        }
        
        .stats-table td:not(:first-child) {
            text-align: center;
            font-family: 'Courier New', monospace;
        }
        
        .chart-container {
            margin: 20px 0;
            padding: 20px;
            background: white;
            border-radius: 10px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }
        
        .chart-title {
            text-align: center;
            font-size: 1.5em;
            color: #2c3e50;
            margin-bottom: 20px;
            font-weight: bold;
        }
        
        .boxplot-container {
            display: flex;
            justify-content: space-around;
            margin: 40px 0;
            padding: 20px;
        }
        
        .boxplot {
            position: relative;
            width: 300px;
            height: 200px;
            margin: 20px;
        }
        
        .boxplot-title {
            text-align: center;
            font-weight: bold;
            margin-bottom: 20px;
            color: #2c3e50;
        }
        
        .summary-box {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 25px;
            border-radius: 15px;
            margin-top: 30px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
        }
        
        .summary-box h3 {
            margin-bottom: 15px;
            font-size: 1.3em;
        }
        
        .summary-box p {
            margin-bottom: 10px;
            line-height: 1.6;
        }
        
        .interpretation-box {
            background: #f8f9fa;
            border-left: 5px solid #3498db;
            padding: 20px;
            margin: 20px 0;
            border-radius: 0 10px 10px 0;
        }
        
        .interpretation-box h4 {
            color: #2c3e50;
            margin-bottom: 10px;
        }
        
        .interpretation-box ul {
            list-style-type: none;
            padding-left: 0;
        }
        
        .interpretation-box li {
            margin-bottom: 8px;
            padding-left: 20px;
            position: relative;
        }
        
        .interpretation-box li:before {
            content: "‚Üí";
            position: absolute;
            left: 0;
            color: #3498db;
            font-weight: bold;
        }
        
        .responsive-canvas {
            max-width: 100%;
            height: 400px;
        }
        
        @media (max-width: 768px) {
            .container {
                padding: 10px;
            }
            
            .tabs {
                flex-direction: column;
            }
            
            .tab-button {
                padding: 10px 15px;
                font-size: 14px;
            }
            
            .stats-table {
                font-size: 12px;
            }
            
            .boxplot-container {
                flex-direction: column;
                align-items: center;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üìä An√°lise Estat√≠stica Comparativa</h1>
        
        <div class="tabs">
            <button class="tab-button active" onclick="showTab('table')">üìã Tabela Estat√≠sticas</button>
            <button class="tab-button" onclick="showTab('histogram')">üìä Histograma</button>
            <button class="tab-button" onclick="showTab('boxplot')">üì¶ Boxplot</button>
            <button class="tab-button" onclick="showTab('ogive')">üìà Ogiva</button>
        </div>
        
        <!-- Tabela de Estat√≠sticas -->
        <div id="table" class="tab-content active">
            <table class="stats-table">
                <thead>
                    <tr>
                        <th>Estat√≠stica</th>
                        <th>Grupo 1 (10h-15h)</th>
                        <th>Grupo 2 (15h-20h)</th>
                    </tr>
                </thead>
                <tbody>
                    <tr><td>M√©dia</td><td>16,92</td><td>15,57</td></tr>
                    <tr><td>Mediana</td><td>17,23</td><td>15,05</td></tr>
                    <tr><td>Moda</td><td>12,60</td><td>20,87</td></tr>
                    <tr><td>Desvio Padr√£o</td><td>3,61</td><td>4,23</td></tr>
                    <tr><td>Vari√¢ncia da Amostra</td><td>13,06</td><td>17,88</td></tr>
                    <tr><td>Coeficiente de Varia√ß√£o</td><td>0,21</td><td>0,27</td></tr>
                    <tr><td>Intervalo Total</td><td>17,48</td><td>21,38</td></tr>
                    <tr><td>M√≠nimo</td><td>7,27</td><td>4,39</td></tr>
                    <tr><td>M√°ximo</td><td>24,75</td><td>25,77</td></tr>
                    <tr><td>Contagem</td><td>32</td><td>38</td></tr>
                    <tr><td>Quartil 1 (Q1)</td><td>13,76</td><td>12,74</td></tr>
                    <tr><td>Quartil 2 (Q2)</td><td>17,23</td><td>15,05</td></tr>
                    <tr><td>Quartil 3 (Q3)</td><td>18,80</td><td>17,68</td></tr>
                    <tr><td>Amplitude Interquartil</td><td>5,04</td><td>4,94</td></tr>
                </tbody>
            </table>
        </div>
        
        <!-- Histograma -->
        <div id="histogram" class="tab-content">
            <div class="chart-container">
                <h3 class="chart-title">Histograma Comparativo</h3>
                <canvas id="histogramChart" class="responsive-canvas"></canvas>
            </div>
            <div class="interpretation-box">
                <h4>Interpreta√ß√£o do Histograma:</h4>
                <ul>
                    <li>Visualiza a distribui√ß√£o de frequ√™ncias dos dois grupos</li>
                    <li>Permite comparar a forma das distribui√ß√µes</li>
                    <li>Grupo 1 apresenta distribui√ß√£o mais concentrada</li>
                    <li>Grupo 2 mostra maior dispers√£o dos valores</li>
                </ul>
            </div>
        </div>
        
        <!-- Boxplot -->
        <div id="boxplot" class="tab-content">
            <div class="chart-container">
                <h3 class="chart-title">Boxplot Comparativo</h3>
                <canvas id="boxplotChart" class="responsive-canvas"></canvas>
            </div>
            <div class="interpretation-box">
                <h4>Interpreta√ß√£o do Boxplot:</h4>
                <ul>
                    <li>Caixa colorida representa o intervalo interquartil (Q1 a Q3)</li>
                    <li>Linha preta grossa dentro da caixa indica a mediana</li>
                    <li>Whiskers (bigodes) se estendem at√© o valor mais extremo dentro de 1,5√óIQR</li>
                    <li>Pontos amarelos destacam outliers (valores extremos)</li>
                    <li>Pontos individuais mostram a distribui√ß√£o real dos dados</li>
                    <li>Grupo 1: Distribui√ß√£o mais concentrada com menos outliers</li>
                    <li>Grupo 2: Maior variabilidade com poss√≠vel presen√ßa de mais outliers</li>
                </ul>
            </div>
        </div>
        
        <!-- Ogiva -->
        <div id="ogive" class="tab-content">
            <div class="chart-container">
                <h3 class="chart-title">Ogiva (Distribui√ß√£o Acumulada)</h3>
                <canvas id="ogiveChart" class="responsive-canvas"></canvas>
            </div>
            <div class="interpretation-box">
                <h4>Interpreta√ß√£o da Ogiva:</h4>
                <ul>
                    <li>Mostra o percentual acumulado de observa√ß√µes at√© cada valor</li>
                    <li>Permite identificar percentis e comparar distribui√ß√µes</li>
                    <li>Curvas mais √≠ngremes indicam maior concentra√ß√£o de dados</li>
                    <li>O ponto onde a linha cruza 50% corresponde √† mediana</li>
                </ul>
            </div>
        </div>
        
        <!-- Resumo -->
        <div class="summary-box">
            <h3>üéØ Resumo da An√°lise Comparativa</h3>
            <p><strong>Tend√™ncia Central:</strong> O Grupo 1 (10h-15h) apresenta m√©dia ligeiramente superior (16,92 vs 15,57), mas o Grupo 2 tem moda mais alta.</p>
            <p><strong>Variabilidade:</strong> O Grupo 2 (15h-20h) √© mais vari√°vel (CV = 0,27 vs 0,21), indicando maior dispers√£o dos dados.</p>
            <p><strong>Distribui√ß√£o:</strong> O Grupo 1 tem distribui√ß√£o mais sim√©trica (m√©dia ‚âà mediana), enquanto o Grupo 2 apresenta leve assimetria.</p>
            <p><strong>Amplitude:</strong> O Grupo 2 tem maior amplitude total (21,38 vs 17,48), com valor m√≠nimo mais baixo.</p>
        </div>
    </div>

    <script>
        // Dados estat√≠sticos
        const grupo1Stats = {
            mean: 16.92, median: 17.23, mode: 12.60, std: 3.61, min: 7.27, max: 24.75,
            count: 32, q1: 13.76, q2: 17.23, q3: 18.80
        };
        
        const grupo2Stats = {
            mean: 15.57, median: 15.05, mode: 20.87, std: 4.23, min: 4.39, max: 25.77,
            count: 38, q1: 12.74, q2: 15.05, q3: 17.68
        };

        // Fun√ß√£o para alternar abas
        function showTab(tabName) {
            // Esconder todas as abas
            document.querySelectorAll('.tab-content').forEach(tab => {
                tab.classList.remove('active');
            });
            
            // Remover classe ativa de todos os bot√µes
            document.querySelectorAll('.tab-button').forEach(button => {
                button.classList.remove('active');
            });
            
            // Mostrar aba selecionada
            document.getElementById(tabName).classList.add('active');
            event.target.classList.add('active');
            
            // Renderizar gr√°ficos conforme necess√°rio
            if (tabName === 'histogram') {
                setTimeout(createHistogram, 100);
            } else if (tabName === 'boxplot') {
                setTimeout(createBoxplot, 100);
            } else if (tabName === 'ogive') {
                setTimeout(createOgive, 100);
            }
        }

        // Gerar dados sint√©ticos baseados nas estat√≠sticas
        function generateSyntheticData(stats) {
            const data = [];
            const { mean, median, std, min, max, count, q1, q3 } = stats;
            
            for (let i = 0; i < count; i++) {
                let value;
                const rand = Math.random();
                
                if (rand < 0.25) {
                    value = min + Math.random() * (q1 - min);
                } else if (rand < 0.5) {
                    value = q1 + Math.random() * (median - q1);
                } else if (rand < 0.75) {
                    value = median + Math.random() * (q3 - median);
                } else {
                    value = q3 + Math.random() * (max - q3);
                }
                
                // Ajustar para aproximar a m√©dia
                const adjustment = (mean - (min + max) / 2) * 0.2;
                value += adjustment + (Math.random() - 0.5) * std * 0.3;
                
                value = Math.max(min, Math.min(max, parseFloat(value.toFixed(2))));
                data.push(value);
            }
            
            return data.sort((a, b) => a - b);
        }

        const grupo1Data = generateSyntheticData(grupo1Stats);
        const grupo2Data = generateSyntheticData(grupo2Stats);

        // Criar histograma
        function createHistogram() {
            const canvas = document.getElementById('histogramChart');
            if (!canvas) return;
            
            const ctx = canvas.getContext('2d');
            
            // Destruir gr√°fico existente se houver
            if (window.histogramChartInstance) {
                window.histogramChartInstance.destroy();
            }
            
            // Criar bins para o histograma
            const allData = [...grupo1Data, ...grupo2Data];
            const min = Math.min(...allData);
            const max = Math.max(...allData);
            const bins = 8;
            const binWidth = (max - min) / bins;
            
            const labels = [];
            const data1 = [];
            const data2 = [];
            
            for (let i = 0; i < bins; i++) {
                const binStart = min + i * binWidth;
                const binEnd = min + (i + 1) * binWidth;
                labels.push(`${binStart.toFixed(1)}-${binEnd.toFixed(1)}`);
                
                const count1 = grupo1Data.filter(val => val >= binStart && (i === bins - 1 ? val <= binEnd : val < binEnd)).length;
                const count2 = grupo2Data.filter(val => val >= binStart && (i === bins - 1 ? val <= binEnd : val < binEnd)).length;
                
                data1.push(count1);
                data2.push(count2);
            }
            
            window.histogramChartInstance = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: labels,
                    datasets: [{
                        label: 'Grupo 1 (10h-15h)',
                        data: data1,
                        backgroundColor: 'rgba(54, 162, 235, 0.7)',
                        borderColor: 'rgba(54, 162, 235, 1)',
                        borderWidth: 2
                    }, {
                        label: 'Grupo 2 (15h-20h)',
                        data: data2,
                        backgroundColor: 'rgba(255, 99, 132, 0.7)',
                        borderColor: 'rgba(255, 99, 132, 1)',
                        borderWidth: 2
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'top',
                        },
                        title: {
                            display: true,
                            text: 'Distribui√ß√£o de Frequ√™ncias'
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            title: {
                                display: true,
                                text: 'Frequ√™ncia'
                            }
                        },
                        x: {
                            title: {
                                display: true,
                                text: 'Intervalos'
                            }
                        }
                    }
                }
            });
        }

        // Criar boxplot
        function createBoxplot() {
            const canvas = document.getElementById('boxplotChart');
            if (!canvas) return;
            
            const ctx = canvas.getContext('2d');
            
            if (window.boxplotChartInstance) {
                window.boxplotChartInstance.destroy();
            }
            
            // Fun√ß√£o para calcular outliers
            function calculateOutliers(data, q1, q3) {
                const iqr = q3 - q1;
                const lowerFence = q1 - 1.5 * iqr;
                const upperFence = q3 + 1.5 * iqr;
                
                const outliers = data.filter(val => val < lowerFence || val > upperFence);
                const nonOutliers = data.filter(val => val >= lowerFence && val <= upperFence);
                
                return {
                    outliers,
                    min: Math.min(...nonOutliers),
                    max: Math.max(...nonOutliers)
                };
            }
            
            const grupo1Outliers = calculateOutliers(grupo1Data, grupo1Stats.q1, grupo1Stats.q3);
            const grupo2Outliers = calculateOutliers(grupo2Data, grupo2Stats.q1, grupo2Stats.q3);
            
            // Criar datasets para o boxplot
            const datasets = [];
            
            // Dados dos pontos individuais do Grupo 1
            datasets.push({
                label: 'Dados Grupo 1',
                data: grupo1Data.map(val => ({x: 0.8, y: val})),
                backgroundColor: 'rgba(54, 162, 235, 0.4)',
                borderColor: 'rgba(54, 162, 235, 0.8)',
                borderWidth: 1,
                pointRadius: 3,
                type: 'scatter',
                showLine: false
            });
            
            // Dados dos pontos individuais do Grupo 2
            datasets.push({
                label: 'Dados Grupo 2',
                data: grupo2Data.map(val => ({x: 1.2, y: val})),
                backgroundColor: 'rgba(255, 99, 132, 0.4)',
                borderColor: 'rgba(255, 99, 132, 0.8)',
                borderWidth: 1,
                pointRadius: 3,
                type: 'scatter',
                showLine: false
            });
            
            // Outliers do Grupo 1
            if (grupo1Outliers.outliers.length > 0) {
                datasets.push({
                    label: 'Outliers Grupo 1',
                    data: grupo1Outliers.outliers.map(val => ({x: 0.8, y: val})),
                    backgroundColor: 'rgba(255, 206, 84, 0.9)',
                    borderColor: 'rgba(255, 206, 84, 1)',
                    borderWidth: 2,
                    pointRadius: 5,
                    type: 'scatter',
                    showLine: false
                });
            }
            
            // Outliers do Grupo 2
            if (grupo2Outliers.outliers.length > 0) {
                datasets.push({
                    label: 'Outliers Grupo 2',
                    data: grupo2Outliers.outliers.map(val => ({x: 1.2, y: val})),
                    backgroundColor: 'rgba(255, 206, 84, 0.9)',
                    borderColor: 'rgba(255, 206, 84, 1)',
                    borderWidth: 2,
                    pointRadius: 5,
                    type: 'scatter',
                    showLine: false
                });
            }
            
            window.boxplotChartInstance = new Chart(ctx, {
                type: 'scatter',
                data: { datasets },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'top',
                        },
                        title: {
                            display: true,
                            text: 'Boxplot Comparativo'
                        },
                        tooltip: {
                            callbacks: {
                                title: function() {
                                    return '';
                                },
                                label: function(context) {
                                    return `Valor: ${context.parsed.y.toFixed(2)}`;
                                }
                            }
                        }
                    },
                    scales: {
                        x: {
                            type: 'linear',
                            min: 0.5,
                            max: 1.5,
                            ticks: {
                                callback: function(value) {
                                    if (value === 0.8) return 'Grupo 1 (10h-15h)';
                                    if (value === 1.2) return 'Grupo 2 (15h-20h)';
                                    return '';
                                }
                            },
                            title: {
                                display: true,
                                text: 'Grupos'
                            }
                        },
                        y: {
                            beginAtZero: false,
                            title: {
                                display: true,
                                text: 'Dist√¢ncia (Km)'
                            }
                        }
                    },
                    onHover: (event, activeElements) => {
                        event.native.target.style.cursor = activeElements.length > 0 ? 'pointer' : 'default';
                    }
                },
                plugins: [{
                    id: 'boxplotPlugin',
                    afterDatasetsDraw: function(chart) {
                        const ctx = chart.ctx;
                        const chartArea = chart.chartArea;
                        
                        // Fun√ß√£o para desenhar boxplot
                        function drawBoxplot(x, stats, outliers, color) {
                            const xPixel = chart.scales.x.getPixelForValue(x);
                            const boxWidth = 40;
                            
                            // Converter valores para pixels
                            const minY = chart.scales.y.getPixelForValue(outliers.min);
                            const q1Y = chart.scales.y.getPixelForValue(stats.q1);
                            const medianY = chart.scales.y.getPixelForValue(stats.median);
                            const q3Y = chart.scales.y.getPixelForValue(stats.q3);
                            const maxY = chart.scales.y.getPixelForValue(outliers.max);
                            
                            ctx.save();
                            ctx.strokeStyle = color;
                            ctx.fillStyle = color + '40';
                            ctx.lineWidth = 2;
                            
                            // Desenhar whiskers (linhas)
                            ctx.beginPath();
                            ctx.moveTo(xPixel, minY);
                            ctx.lineTo(xPixel, q1Y);
                            ctx.moveTo(xPixel, q3Y);
                            ctx.lineTo(xPixel, maxY);
                            ctx.stroke();
                            
                            // Desenhar caps dos whiskers
                            ctx.beginPath();
                            ctx.moveTo(xPixel - 15, minY);
                            ctx.lineTo(xPixel + 15, minY);
                            ctx.moveTo(xPixel - 15, maxY);
                            ctx.lineTo(xPixel + 15, maxY);
                            ctx.stroke();
                            
                            // Desenhar caixa (IQR)
                            ctx.fillRect(xPixel - boxWidth/2, q3Y, boxWidth, q1Y - q3Y);
                            ctx.strokeRect(xPixel - boxWidth/2, q3Y, boxWidth, q1Y - q3Y);
                            
                            // Desenhar mediana
                            ctx.lineWidth = 3;
                            ctx.beginPath();
                            ctx.moveTo(xPixel - boxWidth/2, medianY);
                            ctx.lineTo(xPixel + boxWidth/2, medianY);
                            ctx.stroke();
                            
                            ctx.restore();
                        }
                        
                        // Desenhar boxplots
                        drawBoxplot(0.8, grupo1Stats, grupo1Outliers, '#3b82f6');
                        drawBoxplot(1.2, grupo2Stats, grupo2Outliers, '#ef4444');
                    }
                }]
            });
        }

        // Criar ogiva
        function createOgive() {
            const canvas = document.getElementById('ogiveChart');
            if (!canvas) return;
            
            const ctx = canvas.getContext('2d');
            
            if (window.ogiveChartInstance) {
                window.ogiveChartInstance.destroy();
            }
            
            // Criar dados para ogiva
            const createOgiveData = (data) => {
                const sorted = [...data].sort((a, b) => a - b);
                return sorted.map((value, index) => ({
                    x: value,
                    y: ((index + 1) / sorted.length) * 100
                }));
            };
            
            const ogive1 = createOgiveData(grupo1Data);
            const ogive2 = createOgiveData(grupo2Data);
            
            window.ogiveChartInstance = new Chart(ctx, {
                type: 'line',
                data: {
                    datasets: [{
                        label: 'Grupo 1 (10h-15h)',
                        data: ogive1,
                        borderColor: 'rgba(54, 162, 235, 1)',
                        backgroundColor: 'rgba(54, 162, 235, 0.1)',
                        borderWidth: 3,
                        fill: false,
                        tension: 0.4
                    }, {
                        label: 'Grupo 2 (15h-20h)',
                        data: ogive2,
                        borderColor: 'rgba(255, 99, 132, 1)',
                        backgroundColor: 'rgba(255, 99, 132, 0.1)',
                        borderWidth: 3,
                        fill: false,
                        tension: 0.4
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'top',
                        },
                        title: {
                            display: true,
                            text: 'Distribui√ß√£o Acumulada (%)'
                        }
                    },
                    scales: {
                        x: {
                            type: 'linear',
                            position: 'bottom',
                            title: {
                                display: true,
                                text: 'Valores'
                            }
                        },
                        y: {
                            beginAtZero: true,
                            max: 100,
                            title: {
                                display: true,
                                text: 'Percentual Acumulado (%)'
                            }
                        }
                    }
                }
            });
        }

        // Inicializar a primeira visualiza√ß√£o
        document.addEventListener('DOMContentLoaded', function() {
            // A tabela j√° est√° vis√≠vel por padr√£o
        });
    </script>
</body>
</html>
